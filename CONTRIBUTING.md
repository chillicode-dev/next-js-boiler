# Contributing
Правила разработки проекта в команде

### Git-регламент
#### Ветки
В проекте обязательно должны присутствовать 3 ветки:
1. `master` - релизные версии проекта (с тегами по номерам версий)
1. `stage` - ветка для презентации заказчику и его одобрения для последующего слияния в `master`
1. `dev` - ветка для деплоя на наш dev-сервер

Эти 3 основные ветки должны быть снабжены CI-пайплайнами для автоматического тестирования и деплоя на наши dev и stage-сервера.

Остальные же ветки используются для ведения отдельными разработчиками и в будущем будут использоваться для слияния в `dev`.

Для создания своей ветки руководствуемся следующими правилами:
1. Ответвляемся от актуальной ветки `dev`
1. Начинаем именование с названия типа действия, которые мы производим в данной ветке 
(`feature`, `hotfix`, `support`, `release`). Например: `feature/..`
1. После косой черты ставим номер задачи в таск-трекере и вкратце описываем действия, который мы производим в данной ветке (только буквы в нижнем регистре и дефис). Например: `feature/1337-responsive-header`
1. После внесения изменений делаем Merge Request в `dev`

Из этого следует, что порядок слияния следующий: 
```
feature/1-feature-title -> dev -> stage -> master
```

#### Коммиты
Все названия коммитов должны быть на английском языке и начинаться с большой буквы.
Если изменения коснулись только одного файла, следует вначале указать его название, например:
```
Button.js: Change text styles
```

Запрещено использовать необъективные названия коммитов в стиле `fix bugs`. 
Всегда начинай коммит с глагола (например: Add, Fix, Update, Remove, Rename, Delete и тд), 
либо с названия файла/папки, в котором велась работа. Затем идет субъект, над которым производилось действие и затем
указывается местоположение, где оно производилось.

То есть сообщение коммита должно примерно соответствовать следующему правилу:
```
{Place}: {action} + {subjects}
```
или:
```
{Action} + {subjects} in {place}
```

Например нам нужно изменить PropTypes в компоненте `/components/Button/Button.js`, тогда название коммита будет:
```
Button.js: fix propTypes
```
или:
```
Fix propTypes in Button.js
```

#### Merge Requests
Для создания MR перед деплоем новых фич:
1. Переходим в раздел "Merge Requests" в репозитории проекта и нажимаем "New Merge Request"
1. Выбираем в качестве "Source branch" свою ветку с фичами/багфиксами, а в качестве "Target branch" ветку `dev`
1. "Title" должен начинаться с номера задачи в таск-трекере, после этого вписываем кратко что было сделано. Например: `#1337 create responsive header`
1. Если работа в ветке не завершена, перед названием MR ставим префикс `WIP:`. Например: `WIP: #1337 create responsive header`
1. "Assignee" ставим тимлида разраба, который проводит Code review
1. Отмечаем галочкой "Delete source branch when merge request is accepted" если хотим удалить ветку после слияния
1. Нажимаем "Submit merge request"
1. После успешного завершения пайплайнов и подтверждения мёрдж реквеста переключаемся в проекте локально на ветку `dev` и подтягиваем изменения
1. В консоли увеличиваем номер версии с помощью команды `npm version patch`
1. Дожидаемся окончания выполнения команды и пушим в репозиторий автоматически созданный коммит с версией и ее тегом
1. Только после этого перед заливом на сервер сливаем `dev` в `stage` (для деплоя на стейдж), а `stage` в `master` (для деплоя в прод)
